import{r as h,j as e,X as j,C as g,g as C}from"./index-FKmzij_1.js";import{P}from"./plus-KKCTwYn-.js";import{T as S}from"./tag-BH-xb0w9.js";import{P as F}from"./phone-DyeO1QEd.js";import{M as E}from"./map-pin-mg8b7J78.js";import{S as M}from"./save-DrKIf50q.js";import{f as V}from"./format-CWC1h8aK.js";const L=({isOpen:v,onClose:p,onSave:z,initialCustomer:a,isSubmitting:f})=>{const[l,c]=h.useState("basic"),[m,y]=h.useState(""),[s,i]=h.useState({firstName:"",lastName:"",email:null,phone:null,address:null,city:null,state:null,zip:null,notes:null,birthday:null,customerSince:V(new Date,"yyyy-MM-dd"),lastVisit:null,tags:[],marketingPreferences:{newsletter:!0,smsNotifications:!1,emailPromotions:!0,specialEvents:!0,unsubscribed:!1}}),x={preferences:["Live Music","Bar","Food","VIP Experience","Quiet Seating","Dancing","Group Events"],frequency:["Regular","Occasional","First-Timer","Returning","VIP Member"],interests:["Blues","Jazz","Country","Rock","Folk","Americana","Bluegrass","Pop"],demographics:["Student","Professional","Senior","Family","Local","Tourist"]};h.useEffect(()=>{a&&i({firstName:a.firstName,lastName:a.lastName,email:a.email,phone:a.phone,address:a.address,city:a.city,state:a.state,zip:a.zip,notes:a.notes,birthday:a.birthday,customerSince:a.customerSince,lastVisit:a.lastVisit,tags:a.tags,marketingPreferences:a.marketingPreferences})},[a]);const r=t=>{const{name:n,value:d}=t.target;i(b=>({...b,[n]:d||null}))},o=t=>{const{name:n,checked:d}=t.target;i(b=>({...b,marketingPreferences:{...b.marketingPreferences,[n]:d}}))},N=()=>{m.trim()&&!s.tags.includes(m.trim())&&(i(t=>({...t,tags:[...t.tags,m.trim()]})),y(""))},k=t=>{i(n=>({...n,tags:n.tags.filter(d=>d!==t)}))},u=t=>{s.tags.includes(t)||i(n=>({...n,tags:[...n.tags,t]}))},w=t=>{t.preventDefault(),!(!s.firstName||!s.lastName)&&z(s)};return v?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"relative max-h-[90vh] w-full max-w-3xl overflow-y-auto rounded-lg bg-zinc-900 shadow-xl",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b border-zinc-700 bg-zinc-900 px-4 py-4 sm:px-6",children:[e.jsx("h2",{className:"font-playfair text-xl font-semibold text-white",children:a?"Edit Customer":"Add New Customer"}),e.jsx("button",{onClick:p,className:"rounded-full p-2 text-gray-400 hover:bg-zinc-800 hover:text-white","aria-label":"Close",children:e.jsx(j,{size:20})})]}),e.jsxs("form",{onSubmit:w,className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-6 flex border-b border-zinc-700 overflow-x-auto",children:[e.jsx("button",{type:"button",className:`border-b-2 px-4 py-2 text-sm font-medium ${l==="basic"?"border-amber-500 text-amber-500":"border-transparent text-gray-400 hover:text-white"}`,onClick:()=>c("basic"),children:"Basic Information"}),e.jsx("button",{type:"button",className:`border-b-2 px-4 py-2 text-sm font-medium ${l==="contact"?"border-amber-500 text-amber-500":"border-transparent text-gray-400 hover:text-white"}`,onClick:()=>c("contact"),children:"Contact Details"}),e.jsx("button",{type:"button",className:`border-b-2 px-4 py-2 text-sm font-medium ${l==="marketing"?"border-amber-500 text-amber-500":"border-transparent text-gray-400 hover:text-white"}`,onClick:()=>c("marketing"),children:"Marketing Preferences"})]}),l==="basic"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-300",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:s.firstName,onChange:r,required:!0,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"John"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-300",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:s.lastName,onChange:r,required:!0,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"Smith"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"birthday",className:"block text-sm font-medium text-gray-300",children:"Birthday"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(g,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"date",id:"birthday",name:"birthday",value:s.birthday||"",onChange:r,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customerSince",className:"block text-sm font-medium text-gray-300",children:"Customer Since"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(g,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"date",id:"customerSince",name:"customerSince",value:s.customerSince,onChange:r,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastVisit",className:"block text-sm font-medium text-gray-300",children:"Last Visit"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(g,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"date",id:"lastVisit",name:"lastVisit",value:s.lastVisit||"",onChange:r,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-300",children:"Notes"}),e.jsx("textarea",{id:"notes",name:"notes",value:s.notes||"",onChange:r,rows:3,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"Any additional notes about this customer..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Customer Tags"}),e.jsxs("div",{className:"mt-1 flex",children:[e.jsx("input",{type:"text",value:m,onChange:t=>y(t.target.value),placeholder:"Add a tag and press +",className:"block w-full rounded-l-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",onKeyPress:t=>{t.key==="Enter"&&(t.preventDefault(),N())}}),e.jsx("button",{type:"button",onClick:N,className:"inline-flex items-center rounded-r-md border border-l-0 border-zinc-700 bg-zinc-700 px-3 py-2 font-medium text-white hover:bg-zinc-600",children:e.jsx(P,{size:16})})]}),s.tags.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.tags.map((t,n)=>e.jsxs("span",{className:"inline-flex items-center rounded-full bg-zinc-800 px-2 py-1 text-xs font-medium text-gray-300",children:[e.jsx(S,{size:10,className:"mr-1 text-amber-500"}),t,e.jsx("button",{type:"button",onClick:()=>k(t),className:"ml-1 rounded-full p-0.5 text-gray-400 hover:bg-zinc-700 hover:text-white",children:e.jsx(j,{size:10})})]},n))}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Preferences"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:x.preferences.map(t=>e.jsx("button",{type:"button",onClick:()=>u(t),disabled:s.tags.includes(t),className:`rounded-full px-2.5 py-1 text-xs font-medium 
                            ${s.tags.includes(t)?"bg-amber-600 text-white cursor-default":"bg-zinc-800 text-gray-300 hover:bg-zinc-700 hover:text-white"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Visit Frequency"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:x.frequency.map(t=>e.jsx("button",{type:"button",onClick:()=>u(t),disabled:s.tags.includes(t),className:`rounded-full px-2.5 py-1 text-xs font-medium 
                            ${s.tags.includes(t)?"bg-amber-600 text-white cursor-default":"bg-zinc-800 text-gray-300 hover:bg-zinc-700 hover:text-white"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Music Interests"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:x.interests.map(t=>e.jsx("button",{type:"button",onClick:()=>u(t),disabled:s.tags.includes(t),className:`rounded-full px-2.5 py-1 text-xs font-medium 
                            ${s.tags.includes(t)?"bg-amber-600 text-white cursor-default":"bg-zinc-800 text-gray-300 hover:bg-zinc-700 hover:text-white"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Demographics"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:x.demographics.map(t=>e.jsx("button",{type:"button",onClick:()=>u(t),disabled:s.tags.includes(t),className:`rounded-full px-2.5 py-1 text-xs font-medium 
                            ${s.tags.includes(t)?"bg-amber-600 text-white cursor-default":"bg-zinc-800 text-gray-300 hover:bg-zinc-700 hover:text-white"}`,children:t},t))})]})]})]})]}),l==="contact"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(C,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email||"",onChange:r,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"john@example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-300",children:"Phone Number"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(F,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:s.phone||"",onChange:r,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"(555) 123-4567"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-300",children:"Street Address"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(E,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"text",id:"address",name:"address",value:s.address||"",onChange:r,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"123 Main St"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-300",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",value:s.city||"",onChange:r,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"Corbin"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-300",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",value:s.state||"",onChange:r,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"KY"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"zip",className:"block text-sm font-medium text-gray-300",children:"ZIP Code"}),e.jsx("input",{type:"text",id:"zip",name:"zip",value:s.zip||"",onChange:r,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"40701"})]})]})]}),l==="marketing"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"rounded-lg bg-zinc-800 p-4",children:[e.jsx("h3",{className:"mb-3 text-sm font-medium text-white",children:"Marketing Preferences"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"newsletter",name:"newsletter",type:"checkbox",checked:s.marketingPreferences.newsletter,onChange:o,className:"h-4 w-4 rounded border-zinc-600 text-amber-600 focus:ring-amber-600"}),e.jsx("label",{htmlFor:"newsletter",className:"ml-2 text-sm text-gray-300",children:"Monthly newsletter"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"specialEvents",name:"specialEvents",type:"checkbox",checked:s.marketingPreferences.specialEvents,onChange:o,className:"h-4 w-4 rounded border-zinc-600 text-amber-600 focus:ring-amber-600"}),e.jsx("label",{htmlFor:"specialEvents",className:"ml-2 text-sm text-gray-300",children:"Special event announcements"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"emailPromotions",name:"emailPromotions",type:"checkbox",checked:s.marketingPreferences.emailPromotions,onChange:o,className:"h-4 w-4 rounded border-zinc-600 text-amber-600 focus:ring-amber-600"}),e.jsx("label",{htmlFor:"emailPromotions",className:"ml-2 text-sm text-gray-300",children:"Email promotions"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"smsNotifications",name:"smsNotifications",type:"checkbox",checked:s.marketingPreferences.smsNotifications,onChange:o,className:"h-4 w-4 rounded border-zinc-600 text-amber-600 focus:ring-amber-600"}),e.jsx("label",{htmlFor:"smsNotifications",className:"ml-2 text-sm text-gray-300",children:"SMS notifications"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"unsubscribed",name:"unsubscribed",type:"checkbox",checked:s.marketingPreferences.unsubscribed,onChange:o,className:"h-4 w-4 rounded border-zinc-600 text-amber-600 focus:ring-amber-600"}),e.jsx("label",{htmlFor:"unsubscribed",className:"ml-2 text-sm text-gray-300",children:e.jsx("strong",{children:"Unsubscribed from all communications"})})]})]}),e.jsx("p",{className:"mt-4 text-xs text-gray-400",children:"We'll only send communications based on these preferences and our privacy policy."})]})}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[l!=="basic"&&e.jsx("button",{type:"button",onClick:()=>c(l==="contact"?"basic":"contact"),className:"rounded-lg bg-zinc-800 px-3 py-2 text-sm font-medium text-white hover:bg-zinc-700 focus:outline-none",children:"Previous"}),l!=="marketing"&&e.jsx("button",{type:"button",onClick:()=>c(l==="basic"?"contact":"marketing"),className:"rounded-lg bg-zinc-800 px-3 py-2 text-sm font-medium text-white hover:bg-zinc-700 focus:outline-none",children:"Next"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:p,className:"rounded-lg bg-zinc-800 px-3 py-2 text-sm font-medium text-white hover:bg-zinc-700 focus:outline-none",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:f||!s.firstName||!s.lastName,className:"inline-flex items-center rounded-lg bg-amber-600 px-3 py-2 text-sm font-medium text-white hover:bg-amber-700 focus:outline-none disabled:opacity-70",children:[e.jsx(M,{size:16,className:"mr-2"}),f?"Saving...":a?"Update Customer":"Save Customer"]})]})]})]})]})}):null};export{L as C};
