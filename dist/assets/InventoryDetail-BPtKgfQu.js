import{c as F,r as g,j as e,X as I,D as E,S as O,C as M,p as X,l as Z,a as G,h as C}from"./index-FKmzij_1.js";import{d as ee,a as te,b as se,c as re}from"./useInventory-ClbVrNoR.js";import{u as ae,B as ne}from"./Breadcrumbs-CCWRCGTu.js";import{T as R}from"./tag-BH-xb0w9.js";import{P as ie}from"./plus-KKCTwYn-.js";import{P as le}from"./package-D-b4TRM-.js";import{S as _}from"./save-DrKIf50q.js";import{C as ce}from"./chevron-left-BZb8Pfj0.js";import{S as de}from"./square-pen-_Hdyo78T.js";import{T as oe}from"./trash-CZRs4jB8.js";import{A as me}from"./alert-triangle-BP7YKB9s.js";import{R as xe,X as ue,Y as he,T as pe,L as be,B as q}from"./generateCategoricalChart-0wePnBsV.js";import{B as ge}from"./BarChart-BJ7HrRmh.js";import{B as fe}from"./bar-chart-C0SHvXzr.js";import{f as U}from"./format-CWC1h8aK.js";import"./useMutation-Chvc8RUs.js";import"./validation-Bq8tbDJB.js";import"./types-D9u2zvev.js";import"./chevron-right-uU2N22sE.js";import"./findIndex-OXyp7iFu.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=F("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=F("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=F("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),je=({isOpen:h,onClose:f,onSave:s,initialItem:i,categories:y,isSubmitting:w})=>{const[r,o]=g.useState({name:"",sku:null,description:null,categoryId:null,unitPrice:null,costPrice:null,currentStock:0,reorderLevel:10,vendor:null,imageUrl:null,isActive:!0}),[n,p]=g.useState([]),[j,l]=g.useState(""),m={categories:["Beer","Wine","Spirits","Food","Merchandise","Equipment","Supplies"],attributes:["Alcoholic","Non-alcoholic","Vegan","Gluten-free","Perishable","Shelf-stable"],suppliers:["Local","Regional","National","Import"],status:["Fast-moving","Slow-moving","Low stock","Discontinued","Seasonal"]};g.useEffect(()=>{if(i&&(o({name:i.name,sku:i.sku,description:i.description,categoryId:i.categoryId,unitPrice:i.unitPrice,costPrice:i.costPrice,currentStock:i.currentStock,reorderLevel:i.reorderLevel,vendor:i.vendor,imageUrl:i.imageUrl,isActive:i.isActive}),i.description)){const t=i.description.match(/#([a-zA-Z0-9_]+)/g);t&&p(t.map(d=>d.substring(1)))}},[i]);const c=t=>{const{name:d,value:x,type:u}=t.target;if(u==="number")o(b=>({...b,[d]:x===""?null:Number(x)}));else if(u==="checkbox"){const b=t.target;o(S=>({...S,[d]:b.checked}))}else o(b=>({...b,[d]:x||null}))},k=()=>{if(j.trim()&&!n.includes(j.trim())){const t=[...n,j.trim()];p(t),l(""),N(t)}},v=t=>{const d=n.filter(x=>x!==t);p(d),N(d)},z=t=>{if(!n.includes(t)){const d=[...n,t];p(d),N(d)}},N=t=>{const x=(r.description||"").replace(/#[a-zA-Z0-9_]+\s*/g,"").trim(),u=t.map(S=>`#${S}`).join(" "),b=x?`${x}

${u}`:u;o(S=>({...S,description:b}))},D=t=>{t.preventDefault(),s(r)};return h?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"relative max-h-[90vh] w-full max-w-3xl overflow-y-auto rounded-lg bg-zinc-900 shadow-xl",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b border-zinc-700 bg-zinc-900 px-4 py-4",children:[e.jsx("h2",{className:"font-playfair text-xl font-semibold text-white",children:i?"Edit Inventory Item":"Add New Inventory Item"}),e.jsx("button",{onClick:f,className:"rounded-full p-2 text-gray-400 hover:bg-zinc-800 hover:text-white","aria-label":"Close",children:e.jsx(I,{size:20})})]}),e.jsxs("form",{onSubmit:D,className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300",children:["Item Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(R,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:c,required:!0,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"e.g. Kentucky Bourbon"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-300",children:"SKU / Item Code"}),e.jsx("input",{type:"text",id:"sku",name:"sku",value:r.sku||"",onChange:c,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"SKU123456"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-gray-300",children:"Category"}),e.jsxs("select",{id:"categoryId",name:"categoryId",value:r.categoryId||"",onChange:c,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",children:[e.jsx("option",{value:"",children:"Select a category"}),y.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-300",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:r.description||"",onChange:c,rows:2,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"Brief description of this item..."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Item Tags"}),e.jsxs("div",{className:"mt-1 flex",children:[e.jsx("input",{type:"text",value:j,onChange:t=>l(t.target.value),placeholder:"Add a tag and press +",className:"block w-full rounded-l-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",onKeyPress:t=>{t.key==="Enter"&&(t.preventDefault(),k())}}),e.jsx("button",{type:"button",onClick:k,className:"inline-flex items-center rounded-r-md border border-l-0 border-zinc-700 bg-zinc-700 px-3 py-2 font-medium text-white hover:bg-zinc-600",children:e.jsx(ie,{size:16})})]}),n.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:n.map((t,d)=>e.jsxs("span",{className:"inline-flex items-center rounded-full bg-zinc-800 px-2 py-1 text-xs font-medium text-gray-300",children:[e.jsx(R,{size:10,className:"mr-1 text-amber-500"}),t,e.jsx("button",{type:"button",onClick:()=>v(t),className:"ml-1 rounded-full p-0.5 text-gray-400 hover:bg-zinc-700 hover:text-white",children:e.jsx(I,{size:10})})]},d))}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Categories"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:m.categories.map(t=>e.jsx("button",{type:"button",onClick:()=>z(t),disabled:n.includes(t),className:`rounded-full px-2.5 py-1 text-xs font-medium 
                          ${n.includes(t)?"bg-amber-600 text-white cursor-default":"bg-zinc-800 text-gray-300 hover:bg-zinc-700 hover:text-white"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Attributes"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:m.attributes.map(t=>e.jsx("button",{type:"button",onClick:()=>z(t),disabled:n.includes(t),className:`rounded-full px-2.5 py-1 text-xs font-medium 
                          ${n.includes(t)?"bg-amber-600 text-white cursor-default":"bg-zinc-800 text-gray-300 hover:bg-zinc-700 hover:text-white"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Supplier Type"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:m.suppliers.map(t=>e.jsx("button",{type:"button",onClick:()=>z(t),disabled:n.includes(t),className:`rounded-full px-2.5 py-1 text-xs font-medium 
                          ${n.includes(t)?"bg-amber-600 text-white cursor-default":"bg-zinc-800 text-gray-300 hover:bg-zinc-700 hover:text-white"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:m.status.map(t=>e.jsx("button",{type:"button",onClick:()=>z(t),disabled:n.includes(t),className:`rounded-full px-2.5 py-1 text-xs font-medium 
                          ${n.includes(t)?"bg-amber-600 text-white cursor-default":"bg-zinc-800 text-gray-300 hover:bg-zinc-700 hover:text-white"}`,children:t},t))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"unitPrice",className:"block text-sm font-medium text-gray-300",children:"Unit Price ($)"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(E,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"number",id:"unitPrice",name:"unitPrice",value:r.unitPrice===null?"":r.unitPrice,onChange:c,min:"0",step:"0.01",className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"costPrice",className:"block text-sm font-medium text-gray-300",children:"Cost Price ($)"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(E,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"number",id:"costPrice",name:"costPrice",value:r.costPrice===null?"":r.costPrice,onChange:c,min:"0",step:"0.01",className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"currentStock",className:"block text-sm font-medium text-gray-300",children:["Current Stock ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(O,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"number",id:"currentStock",name:"currentStock",value:r.currentStock,onChange:c,min:"0",step:"1",required:!0,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"reorderLevel",className:"block text-sm font-medium text-gray-300",children:["Reorder Level ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(le,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"number",id:"reorderLevel",name:"reorderLevel",value:r.reorderLevel,onChange:c,min:"0",step:"1",required:!0,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"10"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"You'll be alerted when stock is below this level"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vendor",className:"block text-sm font-medium text-gray-300",children:"Vendor / Supplier"}),e.jsx("input",{type:"text",id:"vendor",name:"vendor",value:r.vendor||"",onChange:c,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"e.g. ABC Distributors"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-300",children:"Image URL"}),e.jsx("input",{type:"text",id:"imageUrl",name:"imageUrl",value:r.imageUrl||"",onChange:c,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"https://example.com/image.jpg"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"isActive",name:"isActive",type:"checkbox",checked:r.isActive,onChange:c,className:"h-4 w-4 rounded border-zinc-600 text-amber-600 focus:ring-amber-600"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-300",children:"Item is active and available for sale"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:f,className:"rounded-lg bg-zinc-800 px-3 py-2 text-sm font-medium text-white hover:bg-zinc-700 focus:outline-none",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:w||!r.name,className:"inline-flex items-center rounded-lg bg-amber-600 px-3 py-2 text-sm font-medium text-white hover:bg-amber-700 focus:outline-none disabled:opacity-70",children:[e.jsx(_,{size:16,className:"mr-2"}),w?"Saving...":i?"Update Item":"Save Item"]})]})]})]})}):null},ve=({isOpen:h,onClose:f,onSave:s,inventoryItems:i,itemId:y,isSubmitting:w})=>{const[r,o]=g.useState({itemId:y||"",transactionType:"purchase",quantity:1,transactionDate:new Date().toISOString(),notes:null,relatedEntityId:null,relatedEntityType:null,createdBy:null});g.useEffect(()=>{y&&o(l=>({...l,itemId:y}))},[y]);const n=l=>{const{name:m,value:c,type:k}=l.target;o(k==="number"?v=>({...v,[m]:c===""?1:Number(c)}):v=>({...v,[m]:c||null}))},p=l=>{const m=l.target.value;o(c=>({...c,relatedEntityType:m||null,relatedEntityId:null}))},j=l=>{l.preventDefault(),s(r)};return h?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"relative w-full max-w-md rounded-lg bg-zinc-900 shadow-xl",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b border-zinc-700 bg-zinc-900 px-4 py-4",children:[e.jsx("h2",{className:"font-playfair text-xl font-semibold text-white",children:"Record Transaction"}),e.jsx("button",{onClick:f,className:"rounded-full p-2 text-gray-400 hover:bg-zinc-800 hover:text-white","aria-label":"Close",children:e.jsx(I,{size:20})})]}),e.jsxs("form",{onSubmit:j,className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"itemId",className:"block text-sm font-medium text-gray-300",children:["Inventory Item ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"itemId",name:"itemId",value:r.itemId,onChange:n,required:!0,disabled:!!y,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500 disabled:opacity-70",children:[e.jsx("option",{value:"",children:"Select an item"}),i.map(l=>e.jsxs("option",{value:l.id,children:[l.name," ",l.sku?`(${l.sku})`:""]},l.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"transactionType",className:"block text-sm font-medium text-gray-300",children:["Transaction Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"transactionType",name:"transactionType",value:r.transactionType,onChange:n,required:!0,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",children:[e.jsx("option",{value:"purchase",children:"Purchase / Restock"}),e.jsx("option",{value:"sale",children:"Sale"}),e.jsx("option",{value:"waste",children:"Waste / Loss"}),e.jsx("option",{value:"adjustment_add",children:"Adjustment (Add)"}),e.jsx("option",{value:"adjustment_remove",children:"Adjustment (Remove)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-300",children:["Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 flex items-center",children:[r.transactionType==="purchase"||r.transactionType==="adjustment_add"?e.jsx(L,{size:16,className:"mr-2 text-green-500"}):e.jsx(K,{size:16,className:"mr-2 text-red-500"}),e.jsx("input",{type:"number",id:"quantity",name:"quantity",value:r.quantity,onChange:n,min:"1",step:"1",required:!0,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"transactionDate",className:"block text-sm font-medium text-gray-300",children:["Date & Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(M,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"datetime-local",id:"transactionDate",name:"transactionDate",value:r.transactionDate?new Date(r.transactionDate).toISOString().slice(0,16):"",onChange:n,required:!0,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-300",children:"Notes"}),e.jsx("textarea",{id:"notes",name:"notes",value:r.notes||"",onChange:n,rows:2,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"Any additional details..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"createdBy",className:"block text-sm font-medium text-gray-300",children:"Recorded By"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(X,{size:16,className:"mr-2 text-gray-400"}),e.jsx("input",{type:"text",id:"createdBy",name:"createdBy",value:r.createdBy||"",onChange:n,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"Your name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Related To"}),e.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-4",children:[e.jsxs("select",{value:r.relatedEntityType||"",onChange:p,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white shadow-sm focus:border-amber-500 focus:outline-none focus:ring-amber-500",children:[e.jsx("option",{value:"",children:"None"}),e.jsx("option",{value:"event",children:"Event"}),e.jsx("option",{value:"order",children:"Customer Order"})]}),r.relatedEntityType&&e.jsxs("select",{value:r.relatedEntityId||"",onChange:l=>o(m=>({...m,relatedEntityId:l.target.value})),className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white shadow-sm focus:border-amber-500 focus:outline-none focus:ring-amber-500",children:[e.jsxs("option",{value:"",children:["Select ",r.relatedEntityType,"..."]}),e.jsxs("option",{value:"placeholder-1",children:["Example ",r.relatedEntityType," 1"]}),e.jsxs("option",{value:"placeholder-2",children:["Example ",r.relatedEntityType," 2"]})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:f,className:"rounded-lg bg-zinc-800 px-3 py-2 text-sm font-medium text-white hover:bg-zinc-700 focus:outline-none",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:w||!r.itemId||!r.quantity,className:"inline-flex items-center rounded-lg bg-amber-600 px-3 py-2 text-sm font-medium text-white hover:bg-amber-700 focus:outline-none disabled:opacity-70",children:[e.jsx(_,{size:16,className:"mr-2"}),w?"Saving...":"Record Transaction"]})]})]})]})}):null},_e=()=>{var B,$;const{id:h}=Z(),f=G(),{data:s,isLoading:i,isError:y}=ee(h||""),{items:w,updateItem:r,deleteItem:o}=te(),{categories:n}=se(),{transactions:p,isLoading:j,createTransaction:l,isCreating:m}=re(h),c=ae(),[k,v]=g.useState(!1),[z,N]=g.useState(!1),[D,t]=g.useState(!1),[d,x]=g.useState(!1),[u,b]=g.useState("details"),V=(()=>{const a=new Date().getMonth(),T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return Array.from({length:6},(Ne,J)=>{const P=(a-5+J)%12,Q=P<0?P+12:P;return{month:T[Q],inflow:Math.floor(Math.random()*50),outflow:Math.floor(Math.random()*30)}})})(),H=async a=>{if(h){x(!0);try{await r({id:h,updates:a}),v(!1),C.success("Item updated successfully")}catch(T){C.error(`Error updating item: ${T.message}`)}finally{x(!1)}}},W=async()=>{if(h){x(!0);try{await o(h),C.success("Item deleted successfully"),f("/inventory")}catch(a){C.error(`Error deleting item: ${a.message}`)}finally{x(!1),t(!1)}}},Y=async a=>{try{await l(a),N(!1),C.success("Transaction recorded successfully")}catch(T){C.error(`Error recording transaction: ${T.message}`)}};if(i)return e.jsxs("div",{className:"flex h-64 items-center justify-center",children:[e.jsx("div",{className:"mr-3 h-6 w-6 animate-spin rounded-full border-2 border-amber-500 border-t-transparent"}),e.jsx("p",{className:"text-lg text-white",children:"Loading item details..."})]});if(y||!s)return e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Inventory item not found"}),e.jsx("p",{className:"mt-2 text-gray-400",children:"The item you're looking for doesn't exist or you don't have permission to view it."}),e.jsx("button",{onClick:()=>f("/inventory"),className:"mt-4 rounded-lg bg-amber-600 px-4 py-2 text-sm font-medium text-white hover:bg-amber-700",children:"Back to Inventory"})]});const A=s.unitPrice&&s.costPrice?((s.unitPrice-s.costPrice)/s.unitPrice*100).toFixed(1):null;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ne,{items:c}),e.jsxs("div",{className:"flex flex-col items-start justify-between space-y-4 sm:flex-row sm:items-center sm:space-y-0",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>f("/inventory"),className:"mb-2 flex items-center text-sm font-medium text-gray-400 hover:text-white",children:[e.jsx(ce,{size:16,className:"mr-1"}),"Back to Inventory"]}),e.jsx("h1",{className:"font-playfair text-3xl font-bold tracking-tight text-white",children:s.name}),s.sku&&e.jsxs("div",{className:"mt-1 text-sm text-gray-400",children:["SKU: ",s.sku]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center rounded-lg bg-zinc-800 px-3 py-2 text-sm font-medium text-white hover:bg-zinc-700 focus:outline-none",children:[e.jsx(de,{size:16,className:"mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center rounded-lg bg-red-600 px-3 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none",children:[e.jsx(oe,{size:16,className:"mr-2"}),"Delete"]})]})]}),s.currentStock<s.reorderLevel&&e.jsx("div",{className:"rounded-lg bg-amber-900/20 p-4 border border-amber-700",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{size:20,className:"mr-2 text-amber-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-amber-400",children:"Low Stock Alert"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-300",children:["Current stock of ",s.currentStock," units is below the reorder level of ",s.reorderLevel," units."]}),e.jsxs("button",{onClick:()=>N(!0),className:"mt-2 inline-flex items-center rounded-md bg-amber-700 px-2 py-1 text-xs font-medium text-white hover:bg-amber-600",children:[e.jsx(Plus,{size:12,className:"mr-1"})," Record Purchase"]})]})]})}),e.jsx("div",{className:"border-b border-zinc-700",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>b("details"),className:`inline-flex items-center border-b-2 py-4 text-sm font-medium ${u==="details"?"border-amber-500 text-amber-500":"border-transparent text-gray-400 hover:border-gray-600 hover:text-white"}`,children:"Details"}),e.jsx("button",{onClick:()=>b("transactions"),className:`inline-flex items-center border-b-2 py-4 text-sm font-medium ${u==="transactions"?"border-amber-500 text-amber-500":"border-transparent text-gray-400 hover:border-gray-600 hover:text-white"}`,children:"Transactions"}),e.jsx("button",{onClick:()=>b("analytics"),className:`inline-flex items-center border-b-2 py-4 text-sm font-medium ${u==="analytics"?"border-amber-500 text-amber-500":"border-transparent text-gray-400 hover:border-gray-600 hover:text-white"}`,children:"Analytics"})]})}),e.jsxs("div",{children:[u==="details"&&e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-white",children:"Item Details"}),s.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"mb-2 text-sm font-medium text-gray-400",children:"Description"}),e.jsx("p",{className:"text-gray-300",children:s.description})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400",children:"Category"}),e.jsx("p",{className:"text-white",children:s.categoryName||"Uncategorized"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400",children:"Status"}),e.jsx("p",{className:"inline-flex rounded-full px-2.5 py-0.5 text-xs font-medium bg-green-100 text-green-800",children:s.isActive?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400",children:"Unit Price"}),e.jsxs("p",{className:"text-white",children:["$",((B=s.unitPrice)==null?void 0:B.toFixed(2))||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400",children:"Cost Price"}),e.jsxs("p",{className:"text-white",children:["$",(($=s.costPrice)==null?void 0:$.toFixed(2))||"N/A"]})]}),A&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400",children:"Profit Margin"}),e.jsxs("p",{className:"text-white",children:[A,"%"]})]}),s.vendor&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400",children:"Vendor / Supplier"}),e.jsx("p",{className:"text-white",children:s.vendor})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-white",children:"Stock Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-zinc-800 p-4",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Current Stock"}),e.jsx("p",{className:"mt-1 text-2xl font-bold text-white",children:s.currentStock}),s.currentStock<s.reorderLevel?e.jsxs("p",{className:"mt-1 text-xs text-amber-500",children:["Below reorder level (",s.reorderLevel,")"]}):e.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Reorder level: ",s.reorderLevel]})]}),e.jsxs("button",{onClick:()=>N(!0),className:"flex w-full items-center justify-between rounded-lg bg-zinc-800 p-3 text-left text-white transition-all hover:bg-zinc-700",children:[e.jsx("span",{children:"Record Transaction"}),e.jsx(O,{size:16,className:"text-gray-400"})]})]})]}),e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-white",children:"Quick Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Last Transaction"}),e.jsx("p",{className:"text-sm text-white",children:j?"Loading...":p.length>0?U(new Date(p[0].transactionDate),"MMM d, yyyy"):"No transactions"})]}),e.jsx(M,{size:20,className:"text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Last 30 Days Inflow"}),e.jsxs("p",{className:"text-sm text-green-400",children:["+",Math.floor(Math.random()*30)," units"]})]}),e.jsx(L,{size:20,className:"text-green-400"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Last 30 Days Outflow"}),e.jsxs("p",{className:"text-sm text-red-400",children:["-",Math.floor(Math.random()*20)," units"]})]}),e.jsx(K,{size:20,className:"text-red-400"})]})]})]})]})]}),u==="transactions"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Transaction History"}),e.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center rounded-lg bg-amber-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-amber-700",children:[e.jsx(Plus,{size:14,className:"mr-2"}),"New Transaction"]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-zinc-800",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-800",children:[e.jsx("thead",{className:"bg-zinc-900",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-400",children:"Date"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-400",children:"Type"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-400",children:"Quantity"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-400 hidden sm:table-cell",children:"Recorded By"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-400 hidden md:table-cell",children:"Notes"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-800 bg-zinc-900",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-4 text-center text-white",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"mr-2 h-5 w-5 animate-spin rounded-full border-2 border-gray-300 border-t-amber-600"}),"Loading transactions..."]})})}):p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-4 text-center text-white",children:"No transactions recorded for this item"})}):p.map(a=>e.jsxs("tr",{className:"hover:bg-zinc-800",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-300",children:U(new Date(a.transactionDate),"MMM d, yyyy h:mm a")}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${a.transactionType==="purchase"||a.transactionType==="adjustment_add"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.transactionType==="purchase"?"Purchase":a.transactionType==="sale"?"Sale":a.transactionType==="waste"?"Waste":a.transactionType==="adjustment_add"?"Adjustment (+)":a.transactionType==="adjustment_remove"?"Adjustment (-)":a.transactionType})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:e.jsx("span",{className:`font-medium ${a.transactionType==="purchase"||a.transactionType==="adjustment_add"?"text-green-500":"text-red-500"}`,children:a.transactionType==="purchase"||a.transactionType==="adjustment_add"?`+${a.quantity}`:`-${a.quantity}`})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-300 hidden sm:table-cell",children:a.createdBy||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300 hidden md:table-cell",children:e.jsx("div",{className:"max-w-xs truncate",children:a.notes||"-"})})]},a.id))})]})})]}),u==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-white",children:"Stock Trend"}),e.jsx("div",{className:"h-72 w-full",children:e.jsx(xe,{width:"100%",height:"100%",children:e.jsxs(ge,{data:V,children:[e.jsx(ue,{dataKey:"month",stroke:"#9CA3AF"}),e.jsx(he,{stroke:"#9CA3AF"}),e.jsx(pe,{contentStyle:{backgroundColor:"#27272a",borderColor:"#3f3f46",color:"#E5E7EB"},itemStyle:{color:"#E5E7EB"},labelStyle:{color:"#E5E7EB"}}),e.jsx(be,{}),e.jsx(q,{dataKey:"inflow",name:"Stock Added",fill:"#22c55e"}),e.jsx(q,{dataKey:"outflow",name:"Stock Removed",fill:"#ef4444"})]})})}),e.jsx("div",{className:"mt-4 text-sm text-center text-gray-400",children:"Stock movement over the last 6 months"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold text-white",children:"Stock Value"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Current Stock Value"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:["$",s.costPrice?(s.currentStock*s.costPrice).toFixed(2):"N/A"]})]}),e.jsx(E,{size:24,className:"text-amber-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Potential Revenue"}),e.jsxs("p",{className:"text-xl font-bold text-green-500",children:["$",s.unitPrice?(s.currentStock*s.unitPrice).toFixed(2):"N/A"]})]}),e.jsx(fe,{size:24,className:"text-green-500"})]}),A&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Potential Profit"}),e.jsxs("p",{className:"text-xl font-bold text-amber-500",children:["$",((s.unitPrice-s.costPrice)*s.currentStock).toFixed(2)]})]}),e.jsx(L,{size:24,className:"text-amber-500"})]})]})]}),e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold text-white",children:"Stock Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Turnover Rate"}),e.jsx("p",{className:"text-xl font-bold text-white",children:"1.2x"})]}),e.jsx(ArrowDownUp,{size:24,className:"text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Days in Stock"}),e.jsx("p",{className:"text-xl font-bold text-white",children:"45 days"})]}),e.jsx(M,{size:24,className:"text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Recommended Order"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:[s.currentStock<s.reorderLevel?Math.ceil(s.reorderLevel*1.5)-s.currentStock:0," units"]})]}),e.jsx(ye,{size:24,className:"text-gray-400"})]})]})]})]})]})]}),k&&e.jsx(je,{isOpen:k,onClose:()=>v(!1),onSave:H,initialItem:s,categories:n,isSubmitting:d}),z&&e.jsx(ve,{isOpen:z,onClose:()=>N(!1),onSave:Y,inventoryItems:w,itemId:h,isSubmitting:m}),D&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-zinc-900 p-6 shadow-xl",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold text-white",children:"Confirm Deletion"}),e.jsxs("p",{className:"mb-6 text-gray-300",children:["Are you sure you want to delete ",e.jsx("span",{className:"font-medium text-white",children:s.name}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>t(!1),className:"rounded-lg bg-zinc-800 px-4 py-2 text-sm font-medium text-white hover:bg-zinc-700 focus:outline-none",children:"Cancel"}),e.jsx("button",{onClick:W,disabled:d,className:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none disabled:opacity-70",children:d?"Deleting...":"Delete Item"})]})]})})]})};export{_e as default};
