import{s as me,a1 as C,h as d,r as m,j as e,X as Z,T as Q,l as xe,a as ue,R as he,C as pe,D as ge,U as be}from"./index-FKmzij_1.js";import{a as fe,u as je}from"./useEvents-DWrrskT-.js";import{a as ye}from"./useFinances-B6gYctPw.js";import{u as ve,a as P}from"./useMutation-Chvc8RUs.js";import{u as Ne,B as we}from"./Breadcrumbs-CCWRCGTu.js";import{C as ke}from"./chevron-left-BZb8Pfj0.js";import{S as B}from"./star-BWMOOjAP.js";import{S as ze}from"./square-pen-_Hdyo78T.js";import{T as Ce}from"./trash-CZRs4jB8.js";import{S as H}from"./save-DrKIf50q.js";import{C as Se}from"./clock-C-ss61e7.js";import{M as Te}from"./music-BiQh54rL.js";import{M as Ee}from"./message-square-Df_PiQnb.js";import{P as Fe}from"./plus-circle-C1hazwXv.js";import{E as $e}from"./external-link-4A924pnq.js";import{f as Y}from"./format-CWC1h8aK.js";import"./validation-Bq8tbDJB.js";import"./types-D9u2zvev.js";import"./chevron-right-uU2N22sE.js";function Me(n){const c=me(),t=ve({queryKey:["tickets",n],queryFn:()=>C.getTickets(n)}),y=P({mutationFn:l=>C.createTicket(l),onSuccess:()=>{c.invalidateQueries({queryKey:["tickets"]}),c.invalidateQueries({queryKey:["events"]}),d.success("Ticket created successfully!")},onError:l=>{d.error(`Error creating ticket: ${l.message}`)}}),v=P({mutationFn:({id:l,updates:k})=>C.updateTicket(l,k),onSuccess:()=>{c.invalidateQueries({queryKey:["tickets"]}),c.invalidateQueries({queryKey:["events"]}),d.success("Ticket updated successfully!")},onError:l=>{d.error(`Error updating ticket: ${l.message}`)}}),h=P({mutationFn:l=>C.scanTicket(l),onSuccess:()=>{c.invalidateQueries({queryKey:["tickets"]}),c.invalidateQueries({queryKey:["events"]}),d.success("Ticket scanned successfully!")},onError:l=>{d.error(`Error scanning ticket: ${l.message}`)}}),N=P({mutationFn:l=>C.deleteTicket(l),onSuccess:()=>{c.invalidateQueries({queryKey:["tickets"]}),c.invalidateQueries({queryKey:["events"]}),d.success("Ticket deleted successfully!")},onError:l=>{d.error(`Error deleting ticket: ${l.message}`)}});return{tickets:t.data||[],isLoading:t.isLoading,isError:t.isError,error:t.error,createTicket:y.mutate,updateTicket:v.mutate,scanTicket:h.mutate,deleteTicket:N.mutate,isCreating:y.isPending,isUpdating:v.isPending,isScanning:h.isPending,isDeleting:N.isPending}}const Pe=({isOpen:n,onClose:c,onAddTicket:t,eventId:y,defaultPrice:v})=>{const[h,N]=m.useState({purchaserName:"",purchaserEmail:"",price:v,type:"general",status:"valid"}),[l,k]=m.useState(1),[U,r]=m.useState(!1);m.useEffect(()=>{const p=()=>{r(window.innerWidth<640)};return window.addEventListener("resize",p),p(),()=>window.removeEventListener("resize",p)},[]);const a=p=>{const{name:A,value:_}=p.target;N(L=>({...L,[A]:_}))},R=p=>{p.preventDefault(),t({...h,eventId:y,count:l})};return n?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"relative max-h-[90vh] w-full max-w-md overflow-y-auto rounded-lg bg-zinc-900 shadow-xl",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b border-zinc-700 bg-zinc-900 px-4 sm:px-6 py-4",children:[e.jsx("h2",{className:"font-playfair text-lg sm:text-xl font-semibold text-white",children:"Add Tickets"}),e.jsx("button",{onClick:c,className:"rounded-full p-2 text-gray-400 hover:bg-zinc-800 hover:text-white","aria-label":"Close",children:e.jsx(Z,{size:20})})]}),e.jsxs("form",{onSubmit:R,className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"purchaserName",className:"block text-sm font-medium text-gray-300",children:"Purchaser Name"}),e.jsx("input",{type:"text",id:"purchaserName",name:"purchaserName",value:h.purchaserName,onChange:a,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"e.g. John Smith",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"purchaserEmail",className:"block text-sm font-medium text-gray-300",children:"Purchaser Email"}),e.jsx("input",{type:"email",id:"purchaserEmail",name:"purchaserEmail",value:h.purchaserEmail,onChange:a,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"e.g. john@example.com",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-300",children:"Ticket Price ($)"}),e.jsx("input",{type:"number",id:"price",name:"price",value:h.price,onChange:a,min:"0",step:"0.01",className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-300",children:"Ticket Type"}),e.jsxs("select",{id:"type",name:"type",value:h.type,onChange:a,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"vip",children:"VIP"}),e.jsx("option",{value:"earlyBird",children:"Early Bird"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ticketCount",className:"block text-sm font-medium text-gray-300",children:"Number of Tickets"}),e.jsx("input",{type:"number",id:"ticketCount",name:"ticketCount",value:l,onChange:p=>k(parseInt(p.target.value)||1),min:"1",max:"20",className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",required:!0})]})]}),e.jsx("div",{className:"rounded-lg bg-zinc-800 p-3 sm:p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm sm:text-base text-white font-medium",children:"Total"}),e.jsxs("p",{className:"text-xs text-gray-400",children:[l," ticket(s) Ã— $",h.price]})]}),e.jsxs("p",{className:"text-lg sm:text-xl font-bold text-amber-500",children:["$",(l*h.price).toFixed(2)]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:c,className:"rounded-lg bg-zinc-800 px-3 py-1.5 sm:px-4 sm:py-2 text-xs sm:text-sm font-medium text-white hover:bg-zinc-700 focus:outline-none",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"inline-flex items-center rounded-lg bg-amber-600 px-3 py-1.5 sm:px-4 sm:py-2 text-xs sm:text-sm font-medium text-white hover:bg-amber-700 focus:outline-none",children:[e.jsx(Q,{size:14,className:"mr-1 sm:mr-2 sm:size-16"}),"Add Tickets"]})]})]})]})}):null},st=()=>{const{id:n}=xe(),c=ue(),{data:t,isLoading:y,isError:v}=fe(n||""),{updateEvent:h,deleteEvent:N}=je(),{tickets:l,isLoading:k,createTicket:U}=Me(n),{revenue:r,expenses:a,isLoadingRevenue:R,isLoadingExpenses:p,updateRevenue:A,updateExpenses:_}=ye(n||""),L=Ne(),[w,S]=m.useState("overview"),[T,q]=m.useState(!1),[ee,K]=m.useState(!1),[D,z]=m.useState(!1),[s,O]=m.useState(null),[E,F]=m.useState(!1),[Re,Ae]=m.useState(!1),[te,G]=m.useState(!1);if(m.useEffect(()=>{t&&!s&&O({title:t.title,description:t.description||"",date:t.date,startTime:t.start_time,endTime:t.end_time,genre:t.genre||"",image:t.image||"",ticketPrice:t.ticket_price,totalCapacity:t.total_capacity,status:t.status})},[t,s]),y)return e.jsxs("div",{className:"flex h-64 items-center justify-center",children:[e.jsx("div",{className:"mr-3 h-6 w-6 animate-spin rounded-full border-2 border-amber-500 border-t-transparent"}),e.jsx("p",{className:"text-lg text-white",children:"Loading event details..."})]});if(v||!t)return e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Event not found"}),e.jsx("p",{className:"mt-2 text-gray-400",children:"The event you're looking for doesn't exist or you don't have permission to view it."}),e.jsx("button",{onClick:()=>c("/ticketing"),className:"mt-4 rounded-lg bg-amber-600 px-4 py-2 text-sm font-medium text-white hover:bg-amber-700",children:"Back to Events"})]});const g=i=>{const{name:x,value:b}=i.target;O(f=>({...f,[x]:b}))},se=async()=>{if(n){F(!0);try{await h({id:n,updates:{title:s.title,description:s.description,date:s.date,startTime:s.startTime,endTime:s.endTime,genre:s.genre,image:s.image,ticketPrice:parseFloat(s.ticketPrice),totalCapacity:parseInt(s.totalCapacity),status:s.status}}),q(!1),d.success("Event updated successfully")}catch(i){d.error(`Error updating event: ${i.message}`)}finally{F(!1)}}},ie=async()=>{if(n){F(!0);try{await N(n),d.success("Event deleted successfully"),c("/ticketing")}catch(i){d.error(`Error deleting event: ${i.message}`)}finally{F(!1)}}},ae=async i=>{if(n)try{await U({eventId:n,purchaserName:i.purchaserName,purchaserEmail:i.purchaserEmail,price:parseFloat(i.price),type:i.type,status:"valid"}),z(!1),d.success("Ticket added successfully")}catch(x){d.error(`Error adding ticket: ${x.message}`)}},j=(()=>{const i=(t.tickets_sold||0)*t.ticket_price,x=(r==null?void 0:r.bar)||0,b=(r==null?void 0:r.merchandise)||0,f=(r==null?void 0:r.other)||0,M=(a==null?void 0:a.artists)||0,ce=(a==null?void 0:a.staff)||0,oe=(a==null?void 0:a.marketing)||0,de=(a==null?void 0:a.other)||0,W=i+x+b+f,X=M+ce+oe+de;return{ticketRevenue:i,totalRevenue:W,totalExpenses:X,profit:W-X}})(),[u,J]=m.useState({bar:(r==null?void 0:r.bar)||0,merchandise:(r==null?void 0:r.merchandise)||0,other:(r==null?void 0:r.other)||0}),[o,V]=m.useState({artists:(a==null?void 0:a.artists)||0,staff:(a==null?void 0:a.staff)||0,marketing:(a==null?void 0:a.marketing)||0,other:(a==null?void 0:a.other)||0});he.useEffect(()=>{r&&J({bar:r.bar||0,merchandise:r.merchandise||0,other:r.other||0}),a&&V({artists:a.artists||0,staff:a.staff||0,marketing:a.marketing||0,other:a.other||0})},[r,a]);const I=i=>{const{name:x,value:b}=i.target;J(f=>({...f,[x]:parseFloat(b)||0}))},$=i=>{const{name:x,value:b}=i.target;V(f=>({...f,[x]:parseFloat(b)||0}))},re=async()=>{if(n)try{await A({eventId:n,tickets:(t.tickets_sold||0)*t.ticket_price,...u}),await _({eventId:n,...o}),d.success("Financial data updated successfully")}catch(i){d.error(`Error updating financial data: ${i.message}`)}},ne=()=>{const i=`${window.location.origin}/events/${n}`;navigator.clipboard.writeText(i),d.success("Event link copied to clipboard!"),G(!1)},le=i=>{switch(i){case"upcoming":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(we,{items:L}),e.jsxs("div",{className:"flex flex-col items-start justify-between space-y-4 sm:flex-row sm:items-center sm:space-y-0",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>c("/ticketing"),className:"mb-2 flex items-center text-sm font-medium text-gray-400 hover:text-white",children:[e.jsx(ke,{size:16,className:"mr-1"}),"Back to Events"]}),e.jsx("h1",{className:"font-playfair text-3xl font-bold tracking-tight text-white",children:T?e.jsx("input",{type:"text",name:"title",value:(s==null?void 0:s.title)||"",onChange:g,className:"bg-transparent text-3xl font-bold focus:outline-none",style:{width:"100%"}}):t.title})]}),e.jsx("div",{className:"flex space-x-2",children:T?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>q(!1),className:"inline-flex items-center rounded-lg bg-zinc-800 px-3 py-2 text-sm font-medium text-white hover:bg-zinc-700 focus:outline-none",children:[e.jsx(Z,{size:16,className:"mr-2"}),"Cancel"]}),e.jsxs("button",{onClick:se,disabled:E,className:"inline-flex items-center rounded-lg bg-amber-600 px-3 py-2 text-sm font-medium text-white hover:bg-amber-700 focus:outline-none disabled:opacity-70",children:[e.jsx(H,{size:16,className:"mr-2"}),E?"Saving...":"Save Changes"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>c(`/ticketing/${n}/reviews`),className:"inline-flex items-center rounded-lg bg-zinc-800 px-3 py-2 text-sm font-medium text-white hover:bg-zinc-700 focus:outline-none",children:[e.jsx(B,{size:16,className:"mr-2"}),"Reviews"]}),e.jsxs("button",{onClick:()=>q(!0),className:"inline-flex items-center rounded-lg bg-zinc-800 px-3 py-2 text-sm font-medium text-white hover:bg-zinc-700 focus:outline-none",children:[e.jsx(ze,{size:16,className:"mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>K(!0),className:"inline-flex items-center rounded-lg bg-red-600 px-3 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none",children:[e.jsx(Ce,{size:16,className:"mr-2"}),"Delete"]})]})})]}),e.jsx("div",{className:"relative h-48 overflow-hidden rounded-xl sm:h-64",children:T?e.jsxs("div",{className:"absolute inset-0 bg-zinc-800 p-4",children:[e.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-300 mb-2",children:"Event Image URL"}),e.jsx("input",{type:"text",id:"image",name:"image",value:(s==null?void 0:s.image)||"",onChange:g,className:"block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",placeholder:"https://example.com/image.jpg"})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t.image||"https://images.pexels.com/photos/1540406/pexels-photo-1540406.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:t.title,className:"h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:e.jsxs("div",{className:"flex flex-col items-start justify-between space-y-2 sm:flex-row sm:items-end sm:space-y-0",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center",children:[e.jsx(pe,{size:16,className:"mr-1 text-amber-500"}),e.jsx("span",{className:"text-sm font-medium text-white",children:Y(new Date(t.date),"EEEE, MMMM d, yyyy")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Se,{size:16,className:"mr-1 text-amber-500"}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[t.start_time.slice(0,5)," - ",t.end_time.slice(0,5)]})]})]}),e.jsx("div",{className:"rounded-lg bg-zinc-800/80 px-3 py-1.5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{size:16,className:"mr-1 text-amber-500"}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[t.tickets_sold||0,"/",t.total_capacity," tickets sold"]})]})})]})})]})}),e.jsx("div",{className:"border-b border-zinc-700",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>S("overview"),className:`inline-flex items-center border-b-2 py-4 text-sm font-medium ${w==="overview"?"border-amber-500 text-amber-500":"border-transparent text-gray-400 hover:border-gray-600 hover:text-white"}`,children:"Overview"}),e.jsx("button",{onClick:()=>S("tickets"),className:`inline-flex items-center border-b-2 py-4 text-sm font-medium ${w==="tickets"?"border-amber-500 text-amber-500":"border-transparent text-gray-400 hover:border-gray-600 hover:text-white"}`,children:"Tickets"}),e.jsx("button",{onClick:()=>S("finances"),className:`inline-flex items-center border-b-2 py-4 text-sm font-medium ${w==="finances"?"border-amber-500 text-amber-500":"border-transparent text-gray-400 hover:border-gray-600 hover:text-white"}`,children:"Finances"})]})}),e.jsxs("div",{children:[w==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-white",children:"Event Details"}),T?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-300",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:(s==null?void 0:s.description)||"",onChange:g,rows:4,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-300",children:"Date"}),e.jsx("input",{type:"date",id:"date",name:"date",value:(s==null?void 0:s.date)||"",onChange:g,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startTime",className:"block text-sm font-medium text-gray-300",children:"Start Time"}),e.jsx("input",{type:"time",id:"startTime",name:"startTime",value:(s==null?void 0:s.startTime)||"",onChange:g,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endTime",className:"block text-sm font-medium text-gray-300",children:"End Time"}),e.jsx("input",{type:"time",id:"endTime",name:"endTime",value:(s==null?void 0:s.endTime)||"",onChange:g,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"genre",className:"block text-sm font-medium text-gray-300",children:"Genre"}),e.jsxs("select",{id:"genre",name:"genre",value:(s==null?void 0:s.genre)||"",onChange:g,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",children:[e.jsx("option",{value:"",children:"Select Genre"}),e.jsx("option",{value:"Blues",children:"Blues"}),e.jsx("option",{value:"Bluegrass",children:"Bluegrass"}),e.jsx("option",{value:"Country",children:"Country"}),e.jsx("option",{value:"Folk",children:"Folk"}),e.jsx("option",{value:"Jazz",children:"Jazz"}),e.jsx("option",{value:"Rock",children:"Rock"}),e.jsx("option",{value:"Americana",children:"Americana"}),e.jsx("option",{value:"Pop",children:"Pop"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ticketPrice",className:"block text-sm font-medium text-gray-300",children:"Ticket Price ($)"}),e.jsx("input",{type:"number",id:"ticketPrice",name:"ticketPrice",value:(s==null?void 0:s.ticketPrice)||"",onChange:g,min:"0",step:"0.01",className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"totalCapacity",className:"block text-sm font-medium text-gray-300",children:"Total Capacity"}),e.jsx("input",{type:"number",id:"totalCapacity",name:"totalCapacity",value:(s==null?void 0:s.totalCapacity)||"",onChange:g,min:"1",className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-300",children:"Status"}),e.jsxs("select",{id:"status",name:"status",value:(s==null?void 0:s.status)||"",onChange:g,className:"mt-1 block w-full rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-white placeholder-gray-400 focus:border-amber-500 focus:outline-none focus:ring-amber-500",children:[e.jsx("option",{value:"upcoming",children:"Upcoming"}),e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("p",{className:"text-gray-300",children:t.description})}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Genre"}),e.jsx("p",{className:"text-white",children:t.genre||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Status"}),e.jsx("p",{className:`inline-flex rounded-full ${le(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Ticket Price"}),e.jsxs("p",{className:"text-white",children:["$",t.ticket_price]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Total Capacity"}),e.jsx("p",{className:"text-white",children:t.total_capacity})]})]})]})]}),e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-white",children:"Artists"}),t.artist_ids&&t.artist_ids.length>0?e.jsx("div",{className:"space-y-4",children:t.artist_ids.map((i,x)=>e.jsxs("div",{className:"flex items-center rounded-lg bg-zinc-800 p-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-amber-600 text-white",children:e.jsx(Te,{size:16})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-white",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Performer"})]})]},x))}):e.jsxs("div",{className:"rounded-lg bg-zinc-800 p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-300",children:"No artists specified for this event"}),e.jsx("button",{className:"mt-2 text-xs font-medium text-amber-500 hover:text-amber-400",children:"Add Artists"})]})]}),e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Feedback & Reviews"}),e.jsxs("button",{onClick:()=>c(`/ticketing/${n}/reviews`),className:"text-sm font-medium text-amber-500 hover:text-amber-400 flex items-center",children:[e.jsx(B,{size:14,className:"mr-1"}),"Manage Reviews"]})]}),e.jsxs("div",{className:"rounded-lg bg-zinc-800 p-4 text-center",children:[e.jsx(Ee,{size:24,className:"mx-auto text-gray-500 mb-2"}),e.jsx("p",{className:"text-gray-400",children:"No reviews yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Collect feedback from attendees after the event"}),e.jsx("button",{onClick:()=>c(`/ticketing/${n}/reviews`),className:"mt-2 text-xs font-medium text-amber-500",children:"Set up feedback forms"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-white",children:"Event Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Ticket Sales"}),e.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:t.tickets_sold||0}),e.jsxs("span",{className:"rounded-full bg-amber-100 px-2.5 py-0.5 text-xs font-medium text-amber-800",children:[Math.round((t.tickets_sold||0)/t.total_capacity*100),"% sold"]})]}),e.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-zinc-800",children:e.jsx("div",{className:"h-2 rounded-full bg-amber-500",style:{width:`${(t.tickets_sold||0)/t.total_capacity*100}%`}})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Ticket Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",j.ticketRevenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-green-500",children:["$",j.totalRevenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Profit"}),e.jsxs("p",{className:`text-2xl font-bold ${j.profit>=0?"text-green-500":"text-red-500"}`,children:["$",j.profit.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-white",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>z(!0),className:"flex w-full items-center justify-between rounded-lg bg-zinc-800 p-3 text-left text-white transition-all hover:bg-zinc-700",children:[e.jsx("span",{children:"Add Tickets"}),e.jsx(Q,{size:16})]}),e.jsxs("button",{onClick:()=>S("finances"),className:"flex w-full items-center justify-between rounded-lg bg-zinc-800 p-3 text-left text-white transition-all hover:bg-zinc-700",children:[e.jsx("span",{children:"Update Finances"}),e.jsx(ge,{size:16})]}),e.jsxs("button",{onClick:()=>c(`/ticketing/${n}/reviews`),className:"flex w-full items-center justify-between rounded-lg bg-zinc-800 p-3 text-left text-white transition-all hover:bg-zinc-700",children:[e.jsx("span",{children:"Manage Reviews"}),e.jsx(B,{size:16})]}),e.jsxs("button",{className:"flex w-full items-center justify-between rounded-lg bg-zinc-800 p-3 text-left text-white transition-all hover:bg-zinc-700",children:[e.jsx("span",{children:"Contact Artists"}),e.jsx(be,{size:16})]})]})]})]})]}),w==="tickets"&&e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Tickets"}),e.jsxs("button",{onClick:()=>z(!0),className:"rounded-lg bg-amber-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-amber-700",children:[e.jsx(Fe,{size:16,className:"mr-2 inline-block"}),"Add Tickets"]})]}),k?e.jsxs("div",{className:"flex items-center justify-center py-10",children:[e.jsx("div",{className:"mr-3 h-5 w-5 animate-spin rounded-full border-2 border-amber-500 border-t-transparent"}),e.jsx("p",{className:"text-white",children:"Loading tickets..."})]}):l.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-800",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-400",children:"Ticket ID"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-400",children:"Purchaser"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-400",children:"Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-400",children:"Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-400",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-400",children:"Purchase Date"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-800",children:l.map(i=>{var x,b,f,M;return e.jsxs("tr",{className:"hover:bg-zinc-800",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-white",children:i.id.slice(0,8)}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-300",children:i.purchaser_name||"N/A"}),e.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-300",children:["$",i.price]}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-300",children:((x=i.type)==null?void 0:x.charAt(0).toUpperCase())+((b=i.type)==null?void 0:b.slice(1))||"General"}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-xs font-medium ${i.status==="valid"?"bg-green-100 text-green-800":i.status==="used"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:((f=i.status)==null?void 0:f.charAt(0).toUpperCase())+((M=i.status)==null?void 0:M.slice(1))})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-300",children:i.purchase_date?Y(new Date(i.purchase_date),"MMM d, yyyy"):"N/A"}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:e.jsx("button",{className:"text-amber-500 hover:text-amber-400",children:"View"})})]},i.id)})})]})}):e.jsxs("div",{className:"rounded-lg bg-zinc-800 p-8 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"No tickets found"}),e.jsx("p",{className:"mt-2 text-gray-400",children:"No tickets have been sold for this event yet."}),e.jsx("button",{onClick:()=>z(!0),className:"mt-4 rounded-lg bg-amber-600 px-4 py-2 text-sm font-medium text-white hover:bg-amber-700",children:"Add Tickets"})]})]}),w==="finances"&&e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-white",children:"Revenue"}),R?e.jsxs("div",{className:"flex items-center justify-center py-10",children:[e.jsx("div",{className:"mr-3 h-5 w-5 animate-spin rounded-full border-2 border-amber-500 border-t-transparent"}),e.jsx("p",{className:"text-white",children:"Loading revenue data..."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-zinc-800 p-4",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Tickets"}),e.jsxs("span",{className:"text-lg font-medium text-white",children:["$",j.ticketRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-zinc-800 p-4",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Bar Sales"}),e.jsx("input",{type:"number",name:"bar",value:u.bar,onChange:I,min:"0",step:"0.01",className:"w-32 rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1 text-right text-lg font-medium text-white focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-zinc-800 p-4",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Merchandise"}),e.jsx("input",{type:"number",name:"merchandise",value:u.merchandise,onChange:I,min:"0",step:"0.01",className:"w-32 rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1 text-right text-lg font-medium text-white focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-zinc-800 p-4",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Other"}),e.jsx("input",{type:"number",name:"other",value:u.other,onChange:I,min:"0",step:"0.01",className:"w-32 rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1 text-right text-lg font-medium text-white focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]}),e.jsx("div",{className:"h-px bg-zinc-800"}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-green-900/20 p-4",children:[e.jsx("span",{className:"text-base font-medium text-gray-300",children:"Total Revenue"}),e.jsxs("span",{className:"text-xl font-bold text-green-500",children:["$",(j.ticketRevenue+parseFloat(u.bar.toString())+parseFloat(u.merchandise.toString())+parseFloat(u.other.toString())).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-white",children:"Expenses"}),p?e.jsxs("div",{className:"flex items-center justify-center py-10",children:[e.jsx("div",{className:"mr-3 h-5 w-5 animate-spin rounded-full border-2 border-amber-500 border-t-transparent"}),e.jsx("p",{className:"text-white",children:"Loading expenses data..."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-zinc-800 p-4",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Artists"}),e.jsx("input",{type:"number",name:"artists",value:o.artists,onChange:$,min:"0",step:"0.01",className:"w-32 rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1 text-right text-lg font-medium text-white focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-zinc-800 p-4",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Staff"}),e.jsx("input",{type:"number",name:"staff",value:o.staff,onChange:$,min:"0",step:"0.01",className:"w-32 rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1 text-right text-lg font-medium text-white focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-zinc-800 p-4",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Marketing"}),e.jsx("input",{type:"number",name:"marketing",value:o.marketing,onChange:$,min:"0",step:"0.01",className:"w-32 rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1 text-right text-lg font-medium text-white focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-zinc-800 p-4",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Other"}),e.jsx("input",{type:"number",name:"other",value:o.other,onChange:$,min:"0",step:"0.01",className:"w-32 rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1 text-right text-lg font-medium text-white focus:border-amber-500 focus:outline-none focus:ring-amber-500"})]}),e.jsx("div",{className:"h-px bg-zinc-800"}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-red-900/20 p-4",children:[e.jsx("span",{className:"text-base font-medium text-gray-300",children:"Total Expenses"}),e.jsxs("span",{className:"text-xl font-bold text-red-500",children:["$",(parseFloat(o.artists.toString())+parseFloat(o.staff.toString())+parseFloat(o.marketing.toString())+parseFloat(o.other.toString())).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 rounded-xl bg-zinc-900 p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-white",children:"Profit Summary"}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-zinc-800 p-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-medium text-gray-300",children:"Total Profit"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Revenue - Expenses"})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`text-3xl font-bold ${j.ticketRevenue+parseFloat(u.bar.toString())+parseFloat(u.merchandise.toString())+parseFloat(u.other.toString())-(parseFloat(o.artists.toString())+parseFloat(o.staff.toString())+parseFloat(o.marketing.toString())+parseFloat(o.other.toString()))>=0?"text-green-500":"text-red-500"}`,children:["$",(j.ticketRevenue+parseFloat(u.bar.toString())+parseFloat(u.merchandise.toString())+parseFloat(u.other.toString())-(parseFloat(o.artists.toString())+parseFloat(o.staff.toString())+parseFloat(o.marketing.toString())+parseFloat(o.other.toString()))).toLocaleString()]})})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:re,className:"inline-flex items-center rounded-lg bg-amber-600 px-4 py-2 text-sm font-medium text-white hover:bg-amber-700 focus:outline-none",children:[e.jsx(H,{size:16,className:"mr-2"}),"Save Financial Data"]})})]})]})]}),ee&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-zinc-900 p-6 shadow-xl",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold text-white",children:"Confirm Deletion"}),e.jsxs("p",{className:"mb-6 text-gray-300",children:["Are you sure you want to delete ",e.jsx("span",{className:"font-medium text-white",children:t.title}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>K(!1),className:"rounded-lg bg-zinc-800 px-4 py-2 text-sm font-medium text-white hover:bg-zinc-700 focus:outline-none",children:"Cancel"}),e.jsx("button",{onClick:ie,disabled:E,className:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none disabled:opacity-70",children:E?"Deleting...":"Delete Event"})]})]})}),D&&e.jsx(Pe,{isOpen:D,onClose:()=>z(!1),onAddTicket:ae,eventId:n||"",defaultPrice:t.ticket_price}),te&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-zinc-800 rounded-xl p-6 max-w-md w-full border border-zinc-700",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Share Event"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Share this event with others:"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("button",{onClick:ne,className:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Copy Link"]})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg font-medium transition-colors",children:"Close"})})]})})]})};export{st as default};
